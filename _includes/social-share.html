<section class="page__share">
  {% if site.data.ui-text[site.locale].share_on_label %}
    <h4 class="page__share-title">{{ site.data.ui-text[site.locale].share_on_label | default: "Share on" }}</h4>
  {% endif %}

  <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ base_path }}{{ page.url }}" class="btn btn--linkedin" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} LinkedIn" target="_blank" rel="noopener noreferrer">
    <i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

  <a href="https://x.com/intent/post?text={{ base_path }}{{ page.url }}" class="btn btn--x" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} X" target="_blank" rel="noopener noreferrer">
    <i class="fab fa-x-twitter" aria-hidden="true"></i><span> </span>
  </a>

  <button class="btn btn--clipboard" id="copyBtn" title="Copy link to clipboard">
    <i class="fas fa-link" aria-hidden="true"></i><span id="copyBtnText"> Copy Link</span>
  </button>
</section>

<script>
const copyBtn = document.getElementById('copyBtn');

copyBtn.addEventListener('click', () => {
  const btnText = document.getElementById('copyBtnText');
  const icon = copyBtn.querySelector('i');
  const urlToCopy = window.location.href;

  navigator.clipboard.writeText(urlToCopy).then(() => {
    const originalText = btnText.innerText;
    const originalIconClass = icon.className;

    btnText.innerText = " Copied!";
    icon.className = "fas fa-check";
    copyBtn.classList.add('copied');

    setTimeout(() => {
      btnText.innerText = originalText;
      icon.className = originalIconClass;
      copyBtn.classList.remove('copied');
    }, 1500);
  }).catch(err => {
    console.error('Error al copiar: ', err);
  });
});
</script>

<style>
.btn--clipboard {
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
  display: inline-flex;
  align-items: center;
}

.btn--clipboard.copied {
  background-color: #28a745 !important;
  color: white !important;
  transform: scale(1.05);
}

.btn--clipboard:active {
  transform: scale(0.95);
}
</style>
